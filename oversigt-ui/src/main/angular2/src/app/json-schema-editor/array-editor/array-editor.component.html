<div *ngIf="value !== null; else nullValue" style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: flex-start;">
  <div style="flex-grow: 1">
    <ng-container *ngIf="value !== null; else noContent" [ngSwitch]="displayFormat">
      <!-- table display -->
      <table *ngSwitchCase="'table'">
        <tr>
          <th *ngFor="let name of getNames()">{{schemaObject.properties[name].title}}</th>
          <th class="action"></th>
        </tr>
        <tr *ngFor="let item of value; let i = index">
          <td *ngFor="let name of getNames()">
            <app-json-schema [schemaObject]="schemaObject.properties[name]" [(ngModel)]="value[i][name]" [showTitles]="false"></app-json-schema>
          </td>
          <td>
            <nz-button-group>
              <div class="action">
                <button nz-button [nzType]="'dashed'" (click)="removeArrayItem(item)"><i nz-icon type="minus-circle"
                    theme="outline"></i></button>
                <button *ngIf="i !== 0" nz-button [nzType]="'dashed'" (click)="moveItemUp(item)"><i nz-icon type="up-circle"
                    theme="outline"></i></button>
                <button *ngIf="i !== value.length - 1" nz-button [nzType]="'dashed'" (click)="moveItemDown(item)"><i
                    nz-icon type="down-circle" theme="outline"></i></button>
              </div>
            </nz-button-group>
          </td>
        </tr>
      </table>

      <!-- tab display -->
      <nz-tabset *ngSwitchCase="'tabs'" [nzTabPosition]="'left'">
        <nz-tab *ngFor="let item of value; let i = index" [nzTitle]="getTabName(item, i)">
          <div class="array-controls">
            <button nz-button [nzType]="'dashed'" (click)="removeArrayItem(item)">
              <i nz-icon type="minus-circle" theme="outline"></i>
            </button>
          </div>
          <app-json-schema [schemaObject]="schemaObject" [(ngModel)]="value[i]" [showTitles]="true"></app-json-schema>
        </nz-tab>
      </nz-tabset>

      <!-- grid display -->
      <ng-container  *ngSwitchCase="'grid'">
        <nz-card *ngFor="let item of value; let i = index">
          <div class="array-controls">
            <button nz-button [nzType]="'dashed'" (click)="removeArrayItem(item)">
              <i nz-icon type="minus-circle" theme="outline"></i>
            </button>
          </div>
          <app-json-schema [schemaObject]="schemaObject" [(ngModel)]="value[i]"></app-json-schema>
        </nz-card>
      </ng-container>
      <pre *ngSwitchDefault>Unknown array display format: {{displayFormat}}</pre>
    </ng-container>
    <ng-template #noContent>
      <div>Currently this array has no content.</div>
    </ng-template>
  </div>
  <div style="flex-shrink: 0; ">
    <button nz-button [nzType]="'dashed'" (click)="addArrayItem()"><i nz-icon type="plus-circle" theme="outline"></i></button>
  </div>
</div>

<ng-template #nullValue>
  <em>SchemaEditor value is null</em>
</ng-template>
